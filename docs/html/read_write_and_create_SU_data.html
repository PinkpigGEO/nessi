

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Read, write and create SU data &mdash; NeSSI  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Interface with Geopsy-gpdc" href="gpdc_interface.html" />
    <link rel="prev" title="nessi.modeling.interfaces references" href="nessi_modeling_interfaces.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> NeSSI
          

          
            
            <img src="_static/nessi_logo_white.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="seismic_modeling.html">2D elastic seismic modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="seismic_modeling_examples.html">Seismic modeling examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="sucwp_references.html">SU/CWP references</a></li>
<li class="toctree-l1"><a class="reference internal" href="particle_swarm.html">Particle Swarm Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="interfaces.html">Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="nessi_globopt.html">NeSSI global optimization module</a></li>
<li class="toctree-l1"><a class="reference internal" href="nessi_modeling_interfaces.html">nessi.modeling.interfaces references</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Read, write and create SU data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#read-a-su-file">Read a SU file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#access-to-metadata">Access to metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="#visualize-data">Visualize data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#write-su-file-on-disk">Write SU file on disk</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-su-data">Create SU data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gpdc_interface.html">Interface with Geopsy-gpdc</a></li>
<li class="toctree-l1"><a class="reference internal" href="PSO_basics.html">Particle Swarm Optimization: basics</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">NeSSI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Read, write and create SU data</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/read_write_and_create_SU_data.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="read-write-and-create-su-data">
<h1>Read, write and create SU data<a class="headerlink" href="#read-write-and-create-su-data" title="Permalink to this headline">¶</a></h1>
<p>The SU data format is a subset of the industrial standard SEG-Y. It
consists in a binary trace header containing useful informations on the
data such as: the number of time samples (ns), the time sampling (dt),
the source and receiver positions (sx, sy, gx and gy), the position of
the trace in the file and other fields to store metadata.</p>
<div class="section" id="read-a-su-file">
<h2>Read a SU file<a class="headerlink" href="#read-a-su-file" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import the SUdata class from nessi.io module</span>
<span class="kn">from</span> <span class="nn">nessi.io</span> <span class="k">import</span> <span class="n">SUdata</span>

<span class="c1"># Declare</span>
<span class="n">dobs</span> <span class="o">=</span> <span class="n">SUdata</span><span class="p">()</span>

<span class="c1"># Read the SU file</span>
<span class="n">dobs</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;data/musc_F50_01.su&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="access-to-metadata">
<h2>Access to metadata<a class="headerlink" href="#access-to-metadata" title="Permalink to this headline">¶</a></h2>
<p>The access to header is very simple since a valid keyword is provided.
Some header values, such as <code class="docutils literal notranslate"><span class="pre">dt</span></code>, are not in second and a scaling
factor must be applied (please see Seismic Unix keyword documentation
for more informations).</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get number of time samples and the time sampling</span>
<span class="n">ns</span> <span class="o">=</span> <span class="n">dobs</span><span class="o">.</span><span class="n">header</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;ns&#39;</span><span class="p">]</span>
<span class="n">dt</span> <span class="o">=</span> <span class="n">dobs</span><span class="o">.</span><span class="n">header</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span><span class="o">/</span><span class="mf">1000000.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ns</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">12000</span> <span class="mf">0.0001</span>
</pre></div>
</div>
<p>Header values can be directly modified, <em>i.e.</em> to modify the time
sampling for all the traces:</p>
<p><code class="docutils literal notranslate"><span class="pre">dobs.header[:]['dt']</span> <span class="pre">=</span> <span class="pre">new_value_in_seconds</span> <span class="pre">*</span> <span class="pre">1000000.</span></code></p>
</div>
<div class="section" id="visualize-data">
<h2>Visualize data<a class="headerlink" href="#visualize-data" title="Permalink to this headline">¶</a></h2>
<p>Since many useful informations are stored in the SU header, plotting
data is easy and the function’s parameters are almost all related to the
output image layout.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import matplotlib</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Show data</span>
<span class="n">dobs</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="n">clip</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">label2</span><span class="o">=</span><span class="s1">&#39;trace number&#39;</span><span class="p">,</span> <span class="n">label1</span><span class="o">=</span><span class="s1">&#39;time [s]&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Visualize SU data&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/read_write_and_create_SU_data_01.png" src="_images/read_write_and_create_SU_data_01.png" />
</div>
<div class="section" id="write-su-file-on-disk">
<h2>Write SU file on disk<a class="headerlink" href="#write-su-file-on-disk" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Write a SU file</span>
<span class="n">dobs</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;data/output.su&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="create-su-data">
<h2>Create SU data<a class="headerlink" href="#create-su-data" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import numpy module</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># Create fake data using numpy with the time-axis along axis 1</span>
<span class="n">ntrac_fake</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">ns_fake</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="n">dt_fake</span> <span class="o">=</span> <span class="mf">0.0001</span>
<span class="n">data_fake</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">ntrac_fake</span><span class="p">,</span> <span class="n">ns_fake</span><span class="p">))</span>

<span class="c1"># Create a simple SU dataset with minimal informations (tracl, ns, dt) from a numpy array</span>
<span class="n">dobs_fake</span> <span class="o">=</span> <span class="n">SUdata</span><span class="p">()</span>
<span class="n">dobs_fake</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">data_fake</span><span class="p">,</span> <span class="n">dt_fake</span><span class="p">)</span>

<span class="c1"># Check header values and the number of traces</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dobs_fake</span><span class="o">.</span><span class="n">header</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;ns&#39;</span><span class="p">],</span> <span class="n">dobs_fake</span><span class="o">.</span><span class="n">header</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span><span class="o">/</span><span class="mf">1000000.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="n">dobs_fake</span><span class="o">.</span><span class="n">header</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">10000</span><span class="p">]</span> <span class="p">[</span><span class="mf">0.0001</span><span class="p">]</span> <span class="mi">20</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="gpdc_interface.html" class="btn btn-neutral float-right" title="Interface with Geopsy-gpdc" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="nessi_modeling_interfaces.html" class="btn btn-neutral" title="nessi.modeling.interfaces references" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Damien Pageot.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>